/*
 * Power.c
 *
 *  Created on: 30 авг. 2022 г.
 *      Author: belyaev
 */
//*******************************************************************************************
//*******************************************************************************************

#include "Power.h"

//*******************************************************************************************
//*******************************************************************************************

static PowerFlag_t PowerFlags;


//*******************************************************************************************
//*******************************************************************************************
void POWER_Init(void){

	ADC_Init();
	GPIO_InitForInputPullUp(MCU_PWR_BUTTON_GPIO, MCU_PWR_BUTTON_PIN);
}
//**********************************************************
uint32_t POWER_SupplyVoltage(void){

	return ADC_GetMeas(ADC_DC_IN_DIV_CH) * DIVISION_FACTOR;
}
//**********************************************************
PowerFlag_t* POWER_Flags(void){

	return &PowerFlags;
}
//**********************************************************
PwrButtonState_t POWER_PwrButton(void){

	if(MCU_PWR_BTN_GPIO->IDR & (1<<MCU_PWR_BTN_PIN)) return RELEASE;
	else											 return PRESS;
}
//*******************************************************************************************
//*******************************************************************************************
